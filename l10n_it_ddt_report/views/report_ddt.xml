<?xml version="1.0" encoding="utf-8"?>
<odoo>
       <template id="l10n_it_ddt.delivery_data">
            <table class="table table-condensed table-bordered delivery_data">
                <tr>
                    <td>
                        <h8>Transportation Reason</h8>
                        <div class="signature" t-field="ddt.transportation_reason_id"></div>
                    </td>
                    <td>
                        <h8>Carriage Condition</h8>
                        <div t-field="ddt.carriage_condition_id"></div>
                    </td>
                    <td>
                        <h8>Transportation Method</h8>
                        <div t-field="ddt.transportation_method_id"></div>
                    </td>
                    <td>
                        <h8>Goods Description</h8>
                        <div class="signature" t-field="ddt.goods_description_id"></div>
                    </td>
                    <td>
                        <h8>Net Weight</h8>
                        <div class="signature" t-field="ddt.weight"></div>
                    </td>
                    <td>
                        <h8>Gross Weight</h8>
                        <div class="signature" t-field="ddt.gross_weight"></div>
                    </td>
                </tr>
                <!--<tr>-->
                    <!--<td colspan="2">-->
                        <!--<h6>Carrier</h6>-->
                        <!--<div class="signature" t-field="ddt.carrier_id.name"></div>-->
                    <!--</td>-->
                    <!--<td>-->
                        <!--<h6>Date</h6>-->
                        <!--<div class="signature" t-field="ddt.date" t-field-options='{"widget": "date"}'></div>-->
                    <!--</td>-->
                    <!--<td>-->
                        <!--<h6>Pick up time</h6>-->
                        <!--<div class="signature"></div>-->
                    <!--</td>-->
                    <!--<td>-->
                        <!--<h6>Parcels</h6>-->
                        <!--<div class="signature" t-field="ddt.parcels"></div>-->
                    <!--</td>-->
                    <!--<td>-->
                        <!--<h6>Size</h6>-->
                        <!--<div class="signature" t-field="ddt.volume"></div>-->
                    <!--</td>-->
                <!--</tr>-->
            </table>
            <!--<table class="table table-condensed table-bordered delivery_data">-->
                <!--<tr>-->
                    <!--<td>-->
                        <!--<h6>Carrier's Signature</h6>-->
                        <!--<div class="signature"></div>-->
                    <!--</td>-->
                    <!--<td>-->
                        <!--<h6>Driver's Signature</h6>-->
                        <!--<div class="signature"></div>-->
                    <!--</td>-->
                    <!--<td>-->
                        <!--<h6>Recipient's Signature</h6>-->
                        <!--<div class="signature"></div>-->
                    <!--</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td colspan="3"><h6>Notes</h6>-->
                        <!--<div class="signature" t-field="ddt.note"></div>-->
                    <!--</td>-->
                <!--</tr>-->
            <!--</table>-->
        </template>

        <template id="report.external_layout_header">
        <div class="header">
            <div class="row">
                <div class="col-xs-5">
                    <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-height: 45px;"/>
                </div>
                <div class="col-xs-2 ddt_cell">
                    Date:<br/>
                    <span t-field="o.date"/>
                </div>
                <div class="col-xs-3 ddt_cell">
                    DDT n.<br/>
                    <span t-field="o.ddt_number"/>
                </div>
                <div class="col-xs-2 ddt_cell">
                    Page n.<br/>
                    <span class="page"/>/<span class="topage"/>
                </div>
            </div>
        </div>
        </template>

        <template id="external_layout_footer" inherit_id="report.external_layout_footer">
            <xpath expr="//div" position="replace">
            <div class="footer ddt_auto">
                <div class="text-center" style="border-top: 1px solid black; font-size: extra-small;">
                    <ul t-if="not company.custom_footer" class="list-inline">
                        <t t-set="company" t-value="company.sudo()"/>
                        <li t-if="company.phone">Phone: <span t-field="company.phone"/></li>

                        <li t-if="company.fax and company.phone">&amp;bull;</li>
                        <li t-if="company.fax">Fax: <span t-field="company.fax"/></li>

                        <li t-if="company.email and company.fax or company.email and company.phone">&amp;bull;</li>
                        <li t-if="company.email">Email: <span t-field="company.email"/></li>

                        <li t-if="company.website and company.email or company.website and company.fax or company.website and company.phone">&amp;bull;</li>
                        <li t-if="company.website">Website: <span t-field="company.website"/></li>
                    </ul>

                    <ul t-if="not company.custom_footer" class="list-inline" name="financial_infos">
                        <li t-if="company.vat">TIN: <span t-field="company.vat"/></li>
                    </ul>

                    <t t-if="company.custom_footer">
                        <span t-raw="company.rml_footer"/>
                    </t>

                </div>
            </div>
            </xpath>
        </template>

        <template id="l10n_it_ddt.report_ddt">
            <t t-call="report.external_layout">
                <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})" />
                <div class="page">
                    <div class="row">
                        <div class="col-xs-6" style="font-size: small;">
                            <h6>Destinatario</h6>
                            <div t-field="o.partner_shipping_id"
                                t-field-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}' />
                            <div t-if="o.partner_shipping_id">VAT number: <span t-field="o.partner_shipping_id.vat"/></div>
                        </div>
                        <div class="col-xs-6" style="font-size: small;">
                            <h6>Cessionario</h6>
                            <div t-field="o.partner_id"
                                t-field-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}' />
                            <div t-if="o.partner_id">VAT number: <span t-field="o.partner_id.vat"/></div>
                        </div>
                    </div>
                    <table class="table table-condensed">
                        <t t-set="has_serial_number" t-value="o.line_ids.filtered('move_id.lot_ids')" groups="stock.group_production_lot"/>
                        <thead>
                            <tr>
                                <th><strong>Description</strong></th>
                                <th class="text-right"><strong>Quantity</strong></th>
                                <th name="lot_serial" t-if="has_serial_number" class="text-right">
                                    <strong>Lots/Serial Numbers</strong>
                                </th>
                                <t t-if="o.show_price">
                                    <th class="text-right"><strong>Price</strong></th>
                                    <th class="text-right"><strong>Discount</strong></th>
                                </t>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="o.line_ids" t-as="line">
                                <t t-set="lot_dict" t-value="line.quantity_by_lot()"/>
                                <td><span t-field="line.name"></span></td>
                                <td class="text-right"><span t-field="line.product_uom_qty"></span></td>
                                <t t-if="has_serial_number">
                                    <td t-if="line.move_id.lot_ids" class="text-right">
                                        <t t-foreach="lot_dict" t-as="lot">
                                            <div>Î‡ <t t-esc="lot.name"/> <t t-if="lot_dict[lot]">(<t t-esc="lot_dict[lot]"/>)</t></div>
                                        </t>
                                </td>
                                    <td t-if="not line.move_id.lot_ids"/>
                                </t>
                                <t t-if="o.show_price">
                                    <td class="text-right" id="line_price_unit"><span t-field="line.price_unit"></span></td>
                                    <td class="text-right" id="line_discount"><span t-field="line.discount"></span></td>
                                </t>
                            </tr>
                        </tbody>
                    </table>
                    <div class="last-page">
                    <t t-call="l10n_it_ddt.delivery_data">
                        <t t-set="ddt" t-value="o"/>
                    </t>
                    </div>
                </div>
            </t>
        </template>

        <template id="l10n_it_ddt.report_ddt_main">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="l10n_it_ddt.report_ddt" t-lang="o.partner_id.lang"/>
                </t>
            </t>
        </template>

        <report
            string="DDT"
            id="l10n_it_ddt.action_report_ddt"
            model="stock.picking.package.preparation"
            report_type="qweb-pdf"
            name="l10n_it_ddt.report_ddt_main"
            file="l10n_it_ddt.report_ddt_main"/>

</odoo>
